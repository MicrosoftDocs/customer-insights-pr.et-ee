---
title: Masinõppe stuudio (klassikaline) eksperimendid
description: Kasutage masinõppe stuudio (klassikaline) mudeleid rakenduses Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: m-hartmann
ms.author: mhart
ms.reviewer: ameetj
manager: shellyha
ms.openlocfilehash: 8a861d62bdfee6a3a82468fe1ab4a3fbbdad43d4
ms.sourcegitcommit: 139548f8a2d0f24d54c4a6c404a743eeeb8ef8e0
ms.translationtype: HT
ms.contentlocale: et-EE
ms.lasthandoff: 02/15/2021
ms.locfileid: "5270199"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="7aeab-103">Kasutage Azure'i masinõppe stuudio (klassikaline) põhiseid mudeleid</span><span class="sxs-lookup"><span data-stu-id="7aeab-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="7aeab-104">Dynamics 365 Customer Insightsis olevad koondatud andmed on allikaks masinõppemudelite loomisele, mis võivad luua täiendavaid äriülevaateid.</span><span class="sxs-lookup"><span data-stu-id="7aeab-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="7aeab-105">Customer Insights integreerub masinõppe stuudioga (klassikaline), et saaksite kasutada omaenda kohandatud mudeleid.</span><span class="sxs-lookup"><span data-stu-id="7aeab-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="7aeab-106">Selleks et näha, kuidas Azure'i masinõppe abil arendatud mudelid integreeruvad Customer Insightsiga, lugege teemat [Azure'i masinõppe eksperimendid](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="7aeab-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="7aeab-107">Eeltingimused</span><span class="sxs-lookup"><span data-stu-id="7aeab-107">Prerequisites</span></span>

- <span data-ttu-id="7aeab-108">Juurdepääs Customer Insightsi</span><span class="sxs-lookup"><span data-stu-id="7aeab-108">Access to Customer Insights</span></span>
- <span data-ttu-id="7aeab-109">Aktiivne Azure Enterprise'i tellimus</span><span class="sxs-lookup"><span data-stu-id="7aeab-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="7aeab-110">Kliendi koondprofiilid</span><span class="sxs-lookup"><span data-stu-id="7aeab-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="7aeab-111">[Olemi eksportimine Azure'i bloobi salvestusruumi](export-azure-blob-storage.md) seadistatud</span><span class="sxs-lookup"><span data-stu-id="7aeab-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="7aeab-112">Klassikalise masinõppe stuudio seadistamine</span><span class="sxs-lookup"><span data-stu-id="7aeab-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="7aeab-113">Esimese sammuna peame looma masinõppe stuudio (klassikaline) jaoks tööruumi ja stuudio avama.</span><span class="sxs-lookup"><span data-stu-id="7aeab-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="7aeab-114">Avage[https://www.portal.azure.com](https://www.portal.azure.com/) ja logige sisse.</span><span class="sxs-lookup"><span data-stu-id="7aeab-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="7aeab-115">Valige **Loo ressurss**.</span><span class="sxs-lookup"><span data-stu-id="7aeab-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="7aeab-116">OTsige **Masinõppe stuudio tööruum** ja valige **Loo**.</span><span class="sxs-lookup"><span data-stu-id="7aeab-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="7aeab-117">Sisestage nõutavad üksikasjad, et [luua tööruum](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="7aeab-117">Enter the required details to [create the workspace](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="7aeab-118">Valige **Veebiteenuse plaani hinnajärk** imporditavate andmete hulga alusel.</span><span class="sxs-lookup"><span data-stu-id="7aeab-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="7aeab-119">Parima tulemuse saamiseks valige **Asukoht**, mis on teile geograafiliselt kõige lähemal.</span><span class="sxs-lookup"><span data-stu-id="7aeab-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="7aeab-120">Pärast ressursi loomist kuvatakse masinõppe stuudio tööruumi armatuurlaud.</span><span class="sxs-lookup"><span data-stu-id="7aeab-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="7aeab-121">Valige **Käivita masinõppe stuudio**.</span><span class="sxs-lookup"><span data-stu-id="7aeab-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Azure'i masinõppe stuudio kasutajaliides](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="7aeab-123">Azure'i masinõppe stuudioga töötamine</span><span class="sxs-lookup"><span data-stu-id="7aeab-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="7aeab-124">Nüüd saate luua uue eksperimendi või importida olemasoleva eksperimendi malli näidiste galeriist.</span><span class="sxs-lookup"><span data-stu-id="7aeab-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="7aeab-125">Näidiseksperimendid on olemas kolme tavalise stsenaariumi jaoks.</span><span class="sxs-lookup"><span data-stu-id="7aeab-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="7aeab-126">Voolavuse prognoos</span><span class="sxs-lookup"><span data-stu-id="7aeab-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="7aeab-127">Kliendi eluea väärtus</span><span class="sxs-lookup"><span data-stu-id="7aeab-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="7aeab-128">Tootesoovitus või järgmine parim toiming</span><span class="sxs-lookup"><span data-stu-id="7aeab-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="7aeab-129">Kui loote uue katse või kasutate galeriist katsemalli, peate konfigureerima valiku **Impordi andmed** atribuudid.</span><span class="sxs-lookup"><span data-stu-id="7aeab-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="7aeab-130">Kasutage juhendatud kogemust või sisestage otse üksikasjad, et pääseda juurde Azure'i bloobimälule, mis sisaldab teie andmeid.</span><span class="sxs-lookup"><span data-stu-id="7aeab-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Azure'i masinõppe stuudio katse](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="7aeab-132">Nüüd saate ehitada kohandatud töötlemiskonveieri andmete puhastamiseks ja eeltöötlemiseks, funktsioonide ekstraheerimiseks ja sobiva mudeli treenimiseks.</span><span class="sxs-lookup"><span data-stu-id="7aeab-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="7aeab-133">Testige ja optimeerige mudeli jõudlust.</span><span class="sxs-lookup"><span data-stu-id="7aeab-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="7aeab-134">Kui olete mudeli kvaliteediga rahul, valige **Seadistage veebiteenus** > **Ennustatav veebiteenus**.</span><span class="sxs-lookup"><span data-stu-id="7aeab-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="7aeab-135">See suvand impordib treenitud mudeli ja featuriseerimiskonveieri treenitud katsest ennustavasse teenindusse.</span><span class="sxs-lookup"><span data-stu-id="7aeab-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="7aeab-136">Ennustav teenus võib prognooside tegemiseks treeningukatses kasutatud skeemi abil võtta veel ühe sisendandmete komplekti.</span><span class="sxs-lookup"><span data-stu-id="7aeab-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Ennustava veebiteenuse seadistamine](media/predictive-webservice-control.png)

1. <span data-ttu-id="7aeab-138">Kui ennustava veebiteenuse katse on edukas, saate selle juurutada automaatseks ajastamiseks.</span><span class="sxs-lookup"><span data-stu-id="7aeab-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="7aeab-139">Kui soovite, et veebiteenus töötaks rakendusega Customer Insights, valige käsk **Juuruta veebiteenus** > **Juuruta veebiteenus [uus] eelversioon**.</span><span class="sxs-lookup"><span data-stu-id="7aeab-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="7aeab-140">[Lisateave veebiteenuse juurutamise kohta](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span><span class="sxs-lookup"><span data-stu-id="7aeab-140">[Learn more about deploying a web service](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Ennustava veebiteenuse juurutamine](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="7aeab-142">Mudelite näidised galeriist</span><span class="sxs-lookup"><span data-stu-id="7aeab-142">Sample models from the gallery</span></span>

<span data-ttu-id="7aeab-143">Selle artikli mudelite jaoks kasutame Contoso hotelli väljamõeldud stsenaariumi.</span><span class="sxs-lookup"><span data-stu-id="7aeab-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="7aeab-144">Contoso hotell kogub järgmisi andmeid:</span><span class="sxs-lookup"><span data-stu-id="7aeab-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="7aeab-145">Hotellis viibimise tegevusest koosnevad CRM-i andmed.</span><span class="sxs-lookup"><span data-stu-id="7aeab-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="7aeab-146">Andmekogum sisaldab teavet iga registreeritud kliendi peatumise kuupäevade kohta.</span><span class="sxs-lookup"><span data-stu-id="7aeab-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="7aeab-147">See sisaldab ka teavet broneeringu, tubade tüüpide, kulutamise üksikasjade kohta ja nii edasi.</span><span class="sxs-lookup"><span data-stu-id="7aeab-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="7aeab-148">Andmed ulatuvad üle nelja aasta, alates jaanuarist 2014 kuni jaanuarist 2018.</span><span class="sxs-lookup"><span data-stu-id="7aeab-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="7aeab-149">Hotellikülaliste kliendiprofiilid.</span><span class="sxs-lookup"><span data-stu-id="7aeab-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="7aeab-150">Need profiilid sisaldavad teavet iga kliendi kohta, sh nime, sünnikuupäev, postiaadress, sugu ja telefoninumber.</span><span class="sxs-lookup"><span data-stu-id="7aeab-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="7aeab-151">Hotelli pakutavate teenuste kasutus, näiteks spaa, pesumaja, WiFi või kuller.</span><span class="sxs-lookup"><span data-stu-id="7aeab-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="7aeab-152">See teave logitakse iga registreeritud kliendi jaoks.</span><span class="sxs-lookup"><span data-stu-id="7aeab-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="7aeab-153">Tavaliselt on teenuste kasutamine seotud hotellis peatumisega.</span><span class="sxs-lookup"><span data-stu-id="7aeab-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="7aeab-154">Kliendid saavad teenust kasutada ka ilma hotellis viibimata.</span><span class="sxs-lookup"><span data-stu-id="7aeab-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="7aeab-155">Voolavuse analüüs</span><span class="sxs-lookup"><span data-stu-id="7aeab-155">Churn Analysis</span></span>

<span data-ttu-id="7aeab-156">Voolavuse analüüs rakendub erinevatele ärialadele.</span><span class="sxs-lookup"><span data-stu-id="7aeab-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="7aeab-157">Selles näites käsitleme teenuste voolavust, eriti ülalkirjeldatud hotelliteenuste kontekstis.</span><span class="sxs-lookup"><span data-stu-id="7aeab-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="7aeab-158">See on toimiv näide otsast lõpuni kasutatava mudeli konveieri kohta, mida saab kasutada lähtepunktina mis tahes muud tüüpi voolavusmudeli jaoks.</span><span class="sxs-lookup"><span data-stu-id="7aeab-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="7aeab-159">Voolavuse määratlus</span><span class="sxs-lookup"><span data-stu-id="7aeab-159">Definition of Churn</span></span>

<span data-ttu-id="7aeab-160">Voolavuse määratlus võib stsenaariumi põhjal erineda.</span><span class="sxs-lookup"><span data-stu-id="7aeab-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="7aeab-161">Selles näites peab külaline, kes pole viimase aasta jooksul hotelli külastanud, olema märgistatud voolavana.</span><span class="sxs-lookup"><span data-stu-id="7aeab-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="7aeab-162">Eksperimendi malli saab importida galeriist.</span><span class="sxs-lookup"><span data-stu-id="7aeab-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="7aeab-163">Esiteks veenduge, et impordiksite valikud **Hotellis viibimise tegevus**, **Kliendiandmed** ja **Teenusekasutuse andmed** Azure'i bloobimälust.</span><span class="sxs-lookup"><span data-stu-id="7aeab-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Andmete importimine voolavuse mudeli jaoks](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="7aeab-165">Featuriseerimine</span><span class="sxs-lookup"><span data-stu-id="7aeab-165">Featurization</span></span>

<span data-ttu-id="7aeab-166">Vastavalt voolavuse määratlusele, tuvastame kõigepealt algsed funktsioonid, mis mõjutavad silti.</span><span class="sxs-lookup"><span data-stu-id="7aeab-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="7aeab-167">Seejärel töötleme need algsed funktsioonid numbrilisteks funktsioonideks, mida saab kasutada masinõppe mudelitega.</span><span class="sxs-lookup"><span data-stu-id="7aeab-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="7aeab-168">Andmete integreerimine toimub Customer Insightsis, nii et saame need tabelid ühendada üksuse *Kliendi ID* abil.</span><span class="sxs-lookup"><span data-stu-id="7aeab-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Liituge imporditud andmetega](media/join-imported-data.png)

<span data-ttu-id="7aeab-170">Voolavusanalüüsi mudeli ehitamise featuriseerimine võib olla pisut keeruline.</span><span class="sxs-lookup"><span data-stu-id="7aeab-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="7aeab-171">Andmed on aja funktsioon, mis algab iga päev registreeritud hotelli tegevusega.</span><span class="sxs-lookup"><span data-stu-id="7aeab-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="7aeab-172">Featuriseerimise ajal soovime dünaamilistest andmetest genereerida staatilisi funktsioone.</span><span class="sxs-lookup"><span data-stu-id="7aeab-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="7aeab-173">Siinjuhul loome hotellitegevuste alusel mitu funktsiooni, millel on aastane liikuv ajavahemik.</span><span class="sxs-lookup"><span data-stu-id="7aeab-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="7aeab-174">Laiendame ka kategooriafunktsioone, näiteks toa tüüp või broneeringutüüp eraldi funktsioonideks, kasutades ühe korraga kodeerimist.</span><span class="sxs-lookup"><span data-stu-id="7aeab-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="7aeab-175">Lõplik loend funktsioonidest:</span><span class="sxs-lookup"><span data-stu-id="7aeab-175">Final list of features:</span></span>

| <span data-ttu-id="7aeab-176">**Arv**</span><span class="sxs-lookup"><span data-stu-id="7aeab-176">**Number**</span></span>  | <span data-ttu-id="7aeab-177">**Original_Column**</span><span class="sxs-lookup"><span data-stu-id="7aeab-177">**Original_Column**</span></span>          | <span data-ttu-id="7aeab-178">**Tuletatud funktsioonid**</span><span class="sxs-lookup"><span data-stu-id="7aeab-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="7aeab-179">1</span><span class="sxs-lookup"><span data-stu-id="7aeab-179">1</span></span>           | <span data-ttu-id="7aeab-180">Ruumi tüüp</span><span class="sxs-lookup"><span data-stu-id="7aeab-180">Room Type</span></span>                    | <span data-ttu-id="7aeab-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="7aeab-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="7aeab-182">2</span><span class="sxs-lookup"><span data-stu-id="7aeab-182">2</span></span>           | <span data-ttu-id="7aeab-183">Broneeringu tüüp</span><span class="sxs-lookup"><span data-stu-id="7aeab-183">Booking Type</span></span>                 | <span data-ttu-id="7aeab-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="7aeab-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="7aeab-185">3</span><span class="sxs-lookup"><span data-stu-id="7aeab-185">3</span></span>           | <span data-ttu-id="7aeab-186">Reisi kategooria</span><span class="sxs-lookup"><span data-stu-id="7aeab-186">Travel Category</span></span>              | <span data-ttu-id="7aeab-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="7aeab-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="7aeab-188">4</span><span class="sxs-lookup"><span data-stu-id="7aeab-188">4</span></span>           | <span data-ttu-id="7aeab-189">Kulutatud dollarit</span><span class="sxs-lookup"><span data-stu-id="7aeab-189">Dollars Spent</span></span>                | <span data-ttu-id="7aeab-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="7aeab-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="7aeab-191">5</span><span class="sxs-lookup"><span data-stu-id="7aeab-191">5</span></span>           | <span data-ttu-id="7aeab-192">Sisse- ja väljaregistreerimise kuupäevad</span><span class="sxs-lookup"><span data-stu-id="7aeab-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="7aeab-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="7aeab-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="7aeab-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="7aeab-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="7aeab-195">6</span><span class="sxs-lookup"><span data-stu-id="7aeab-195">6</span></span>           | <span data-ttu-id="7aeab-196">Teenusekasutus</span><span class="sxs-lookup"><span data-stu-id="7aeab-196">Service Usage</span></span>                | <span data-ttu-id="7aeab-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="7aeab-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="7aeab-198">Mudeli valik</span><span class="sxs-lookup"><span data-stu-id="7aeab-198">Model selection</span></span>

<span data-ttu-id="7aeab-199">Nüüd tuleb valida optimaalne algoritm, mida kasutada.</span><span class="sxs-lookup"><span data-stu-id="7aeab-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="7aeab-200">Sel juhul põhinevad enamik funktsioone kategooriafunktsioonidel.</span><span class="sxs-lookup"><span data-stu-id="7aeab-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="7aeab-201">Tavaliselt toimivad otsusepuupõhised mudelid hästi.</span><span class="sxs-lookup"><span data-stu-id="7aeab-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="7aeab-202">Kui funktsioonid on ainult numbrilised, võivad neurovõrgud olla parem valik.</span><span class="sxs-lookup"><span data-stu-id="7aeab-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="7aeab-203">Tugivektormasin (SVM) on sellistes olukordades samuti hea kandidaat; parima jõudluse saamiseks on vaja üsna palju häälestamist.</span><span class="sxs-lookup"><span data-stu-id="7aeab-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="7aeab-204">Valime esimesena mudeli **Kahe klassiga võimendusega otsusepuu** ja seejärel teise mudelina **Kahe klassiga SVM**.</span><span class="sxs-lookup"><span data-stu-id="7aeab-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="7aeab-205">Azure'i masinõppe stuudio võimaldab teil teha A/B-testimist, seega on kasulik alustada kahe mudeliga ühe asemel.</span><span class="sxs-lookup"><span data-stu-id="7aeab-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="7aeab-206">Järgmine pilt näitab mudeli treenimise ja hindamise konveierit Azure'i masinõppe stuudiost.</span><span class="sxs-lookup"><span data-stu-id="7aeab-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Azure'i masinõppe stuudio voolavusmudel](media/azure-machine-learning-model.png)

<span data-ttu-id="7aeab-208">Rakendame ka meetodit nimega **Permutatsiooni funktsiooni olulisus**, mis on oluline mudeli optimeerimise korral.</span><span class="sxs-lookup"><span data-stu-id="7aeab-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="7aeab-209">Sisseehitatud mudelitel on vähe või puudub täielik ülevaade mõne konkreetse funktsiooni mõjust lõplikule prognoosile.</span><span class="sxs-lookup"><span data-stu-id="7aeab-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="7aeab-210">Funktsiooni olulisuse kalkulaator kasutab kohandatud algoritmi, et arvutada üksikute funktsioonide mõju konkreetse mudeli tulemusele.</span><span class="sxs-lookup"><span data-stu-id="7aeab-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="7aeab-211">Funktsiooni olulisus normaliseeritakse vahemikus +1 kuni -1.</span><span class="sxs-lookup"><span data-stu-id="7aeab-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="7aeab-212">Negatiivne mõju tähendab, et asjaomasel funktsioonil on tulemusele mittesoovitav mõju ja see tuleks mudelist eemaldada.</span><span class="sxs-lookup"><span data-stu-id="7aeab-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="7aeab-213">Positiivne mõju näitab, et funktsioon aitab prognoosimisele palju kaasa.</span><span class="sxs-lookup"><span data-stu-id="7aeab-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="7aeab-214">Need väärtused pole korrelatsiooni koefitsiendid, kuna need on erinevad mõõdikud.</span><span class="sxs-lookup"><span data-stu-id="7aeab-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="7aeab-215">Lisateavet leiate teemast [Permutatsiooni funktsiooni olulisus](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="7aeab-215">For more information, see [Permutation Feature Importance](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="7aeab-216">Kogu [voolavuse eksperiment on saadaval Azure'i AI galeriis](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="7aeab-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="7aeab-217">Kliendi eluea väärtuse prognoos</span><span class="sxs-lookup"><span data-stu-id="7aeab-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="7aeab-218">Kliendi eluea väärtuse (CLTV) arvutamine on üks olulisemaid mõõdikuid, mida ettevõte saab kasutada oma klientide hindamiseks ja segmentimiseks.</span><span class="sxs-lookup"><span data-stu-id="7aeab-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="7aeab-219">Hotelliettevõtte jaoks on ülioluline tunda oma kliente.</span><span class="sxs-lookup"><span data-stu-id="7aeab-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="7aeab-220">Näiteks on oluliseks teabeks häid kliente moodustavate tegurite mõistmine.</span><span class="sxs-lookup"><span data-stu-id="7aeab-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="7aeab-221">See aitab hotelli juhtkonnal hinnata, millistele funktsioonidele nad peavad keskenduma ja mida tuleks tasuvamate klientide rahuldamiseks parandada.</span><span class="sxs-lookup"><span data-stu-id="7aeab-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="7aeab-222">Need otsused võivad otseselt mõjutada müüki ja töötasu.</span><span class="sxs-lookup"><span data-stu-id="7aeab-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="7aeab-223">CLTV määratlus</span><span class="sxs-lookup"><span data-stu-id="7aeab-223">Definition of CLTV</span></span>

<span data-ttu-id="7aeab-224">Selle näite puhul määratleme kliendi CLTV kui kogu dollarisumma, mille klient eeldatavalt järgmise 365 päeva jooksul kulutab.</span><span class="sxs-lookup"><span data-stu-id="7aeab-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="7aeab-225">Selle väärtuse prognoosimiseks kasutame kõigi klientide viimase kolme aasta andmeid.</span><span class="sxs-lookup"><span data-stu-id="7aeab-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="7aeab-226">Featuriseerimine</span><span class="sxs-lookup"><span data-stu-id="7aeab-226">Featurization</span></span>

<span data-ttu-id="7aeab-227">Sellisel juhul saab featuriseerimine olema päris sarnane voolavuse stsenaariumiga.</span><span class="sxs-lookup"><span data-stu-id="7aeab-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="7aeab-228">Sildid ja prognoositavad väärtused erinevad aga ülalmääratletutest.</span><span class="sxs-lookup"><span data-stu-id="7aeab-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="7aeab-229">Mudeli valik</span><span class="sxs-lookup"><span data-stu-id="7aeab-229">Model selection</span></span>

<span data-ttu-id="7aeab-230">CLTV prognoosimine on regressiooniprobleem, kuna prognoositav väärtus on positiivse väärtusega pidev muutuja.</span><span class="sxs-lookup"><span data-stu-id="7aeab-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="7aeab-231">Funktsiooni atribuutide põhjal valime mudeli treenimiseks esimesena algoritmi **Võimendatud otsusepuu regressioon** ja teisena **Neurovõrgu regressioon**.</span><span class="sxs-lookup"><span data-stu-id="7aeab-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="7aeab-232">Tootesoovitus või järgmine parim tegevus</span><span class="sxs-lookup"><span data-stu-id="7aeab-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="7aeab-233">Tootesoovitust hotelli stsenaariumis tõlgendatakse kui hotelli poolt klientidele pakutavate teenuste soovitamist.</span><span class="sxs-lookup"><span data-stu-id="7aeab-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="7aeab-234">Eesmärk on valida klientidele sobivad teenused nii, et nende kasutamine oleks maksimaalne.</span><span class="sxs-lookup"><span data-stu-id="7aeab-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="7aeab-235">See sarnaneb filmisoovitustega video voogesituse teenuse kasutajatele.</span><span class="sxs-lookup"><span data-stu-id="7aeab-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="7aeab-236">Toote soovituse või järgmise parima toimingu määratlus</span><span class="sxs-lookup"><span data-stu-id="7aeab-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="7aeab-237">Määratleme eesmärgi kui teenusekasutuse maksimeerimine dollarisummas, pakkudes hotelliklientidele nende huvidele vastavaid parimaid teenuseid.</span><span class="sxs-lookup"><span data-stu-id="7aeab-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="7aeab-238">Featuriseerimine</span><span class="sxs-lookup"><span data-stu-id="7aeab-238">Featurization</span></span>

<span data-ttu-id="7aeab-239">Nagu voolavusmudeli puhul, ühendame hotelli ServiceCustomerID kliendi ID-ga, et luua järjepidevalt soovitusi kliendi ID alusel.</span><span class="sxs-lookup"><span data-stu-id="7aeab-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Featuriseerimise soovituse näidis](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="7aeab-241">Andmed pärinevad kolmest erinevast olemist ja funktsioonid on neist tuletatud.</span><span class="sxs-lookup"><span data-stu-id="7aeab-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="7aeab-242">Soovituseprobleemi kirjeldus on erinev võrreldes voolavuse või CLTV stsenaariumidega.</span><span class="sxs-lookup"><span data-stu-id="7aeab-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="7aeab-243">Soovitusmudel vajab sisendandmeid kolme tunnuste komplekti kujul.</span><span class="sxs-lookup"><span data-stu-id="7aeab-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="7aeab-244">Mudeli valik</span><span class="sxs-lookup"><span data-stu-id="7aeab-244">Model selection</span></span>

<span data-ttu-id="7aeab-245">Prognoosime tooteid või teenuseid kasutades algoritmi nimega **Tikutoosialgoritmipõhise soovitaja treenimine**, et treenida soovitusmudelit.</span><span class="sxs-lookup"><span data-stu-id="7aeab-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Tootesoovituse algoritm](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="7aeab-247">Mudeli **Tikutoosialgoritmipõhise soovitaja treenimine** kolm sisendporti kasutavad koolitusteenuse kasutamise andmeid, kliendi kirjeldust (valikuline) ja teenuse kirjeldust.</span><span class="sxs-lookup"><span data-stu-id="7aeab-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="7aeab-248">Mudeli hindamiseks on kolm erinevat viisi.</span><span class="sxs-lookup"><span data-stu-id="7aeab-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="7aeab-249">Üks on mõeldud mudeli hindamiseks, kus normaliseeritud diskonteeritud kumulatiivse kasvu (NDCG) skoor arvutatakse hinnanguga objektide järjestamiseks.</span><span class="sxs-lookup"><span data-stu-id="7aeab-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="7aeab-250">Selles katses on meil NDCG skoor AS 0,97.</span><span class="sxs-lookup"><span data-stu-id="7aeab-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="7aeab-251">Kaks muud võimalust on mudeli hindamine kogu soovitatava teenusekataloogi põhjal või ainult selliste kaupade põhjal, mida kasutajad pole varem kasutanud.</span><span class="sxs-lookup"><span data-stu-id="7aeab-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="7aeab-252">Vaadates edasi kogu teenusekataloogi soovituste jaotust, märkame, et telefon, WiFi ja kuller on kõige populaarsemad teenused, mida soovitatakse.</span><span class="sxs-lookup"><span data-stu-id="7aeab-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="7aeab-253">See on kooskõlas sellega, mida leidsime teenuse tarbimise andmete jaotustest.</span><span class="sxs-lookup"><span data-stu-id="7aeab-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Soovitusmudeli väljund](media/azure-machine-learning-model-output.png)

<span data-ttu-id="7aeab-255">Kogu [tootesoovituse eksperimendile pääseb juurde Azure'i AI galerii kaudu.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="7aeab-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="7aeab-256">Kohandatud mudelite integreerimine</span><span class="sxs-lookup"><span data-stu-id="7aeab-256">Integrate custom models</span></span>

<span data-ttu-id="7aeab-257">Nende prognooside kasutamiseks Customer Insightsis peate **eksportima** prognoosid koos kliendi ID-dega.</span><span class="sxs-lookup"><span data-stu-id="7aeab-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="7aeab-258">[Eksportige need samasse Azure'i boobimällu](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs), kuhu te lähteandmeid ekspordite.</span><span class="sxs-lookup"><span data-stu-id="7aeab-258">[Export them to the same Azure Blob storage location](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="7aeab-259">Ennustavat veebiteenust saab ajastada regulaarselt käitamiseks ja skooride värskendamiseks.</span><span class="sxs-lookup"><span data-stu-id="7aeab-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="7aeab-260">Kohandatud mudeli loodud andmeid saab kasutada kliendiandmete edasiseks rikastamiseks.</span><span class="sxs-lookup"><span data-stu-id="7aeab-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="7aeab-261">Lisateavet vt teemast [Kohandatud masinõppemudelid](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="7aeab-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]